<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Ranking Tipsters</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content color="light">
  <ion-refresher slot="fixed" (ionRefresh)="recargarManual($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="loading-container" *ngIf="cargando">
    <ion-spinner name="bubbles" color="primary"></ion-spinner>
    <p>Calculando puntuaciones...</p>
  </div>

  <div class="ranking-container" *ngIf="!cargando && usuarios.length > 0">
    <ion-list lines="none" class="ranking-list">
      
      <ion-item *ngFor="let user of usuarios; let i = index" 
                class="ranking-item" 
                [ngClass]="'pos-' + (i + 1)"> <div slot="start" class="position-badge">
          <ion-icon name="medal" *ngIf="i === 0" class="gold"></ion-icon>
          <ion-icon name="medal" *ngIf="i === 1" class="silver"></ion-icon>
          <ion-icon name="medal" *ngIf="i === 2" class="bronze"></ion-icon>
          <span *ngIf="i > 2">{{ i + 1 }}</span>
        </div>

        <ion-avatar slot="start" class="user-avatar">
          <img [src]="'https://ui-avatars.com/api/?name=' + user.username + '&background=random&color=fff&bold=true'" alt="avatar">
        </ion-avatar>

        <ion-label>
          <h2 class="username">{{ user.username }}</h2>
          <p class="tipster-title" *ngIf="i === 0">ğŸ† El Mejor de la Clase</p>
        </ion-label>

        <div slot="end" class="points-container">
          <span class="points">{{ user.points }}</span>
          <span class="pts-label">pts</span>
        </div>

      </ion-item>

    </ion-list>
  </div>

  <div class="empty-state" *ngIf="!cargando && usuarios.length === 0">
    <ion-icon name="people-circle-outline"></ion-icon>
    <p>AÃºn no hay usuarios en la liga</p>
  </div>
</ion-content>