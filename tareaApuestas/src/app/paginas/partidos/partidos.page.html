<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-title>Jornada Actual</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content color="light">
  <ion-refresher slot="fixed" (ionRefresh)="recargarManual($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="loading-container" *ngIf="cargando">
    <ion-spinner name="bubbles" color="primary"></ion-spinner>
    <p>Conectando con el estadio...</p>
  </div>

  <div class="matches-container" *ngIf="!cargando">
    
    <div class="empty-state" *ngIf="partidos.length === 0">
      <ion-icon name="calendar-clear-outline"></ion-icon>
      <p>No hay partidos programados</p>
    </div>

    <ion-card *ngFor="let partido of partidos" class="match-card" [routerLink]="['/detalle-partido', partido.id]">
      
      <div class="match-header">
        <ion-badge color="warning" *ngIf="partido.status === 'pending'">Pendiente</ion-badge>
        <ion-badge color="danger" class="live-badge" *ngIf="partido.status === 'live'">
          <span class="pulse-dot"></span> EN VIVO {{ partido.minute }}'
        </ion-badge>
        <ion-badge color="medium" *ngIf="partido.status === 'finished'">Finalizado</ion-badge>
      </div>

      <div class="match-body">
        
        <div class="team">
          <img [src]="'assets/escudos/' + formatearEscudo(partido.homeTeam) + '.png'" 
               onerror="this.src='assets/icon/favicon.png'" class="shield" alt="Escudo local">
          <span class="team-name">{{ partido.homeTeam }}</span>
        </div>

        <div class="score-container">
          <span class="score" [class.live-score]="partido.status === 'live'">
            {{ partido.status === 'pending' ? '-' : partido.homeScore }}
          </span>
          <span class="divider">:</span>
          <span class="score" [class.live-score]="partido.status === 'live'">
            {{ partido.status === 'pending' ? '-' : partido.awayScore }}
          </span>
        </div>

        <div class="team">
          <img [src]="'assets/escudos/' + formatearEscudo(partido.awayTeam) + '.png'" 
               onerror="this.src='assets/icon/favicon.png'" class="shield" alt="Escudo visitante">
          <span class="team-name">{{ partido.awayTeam }}</span>
        </div>

      </div>
    </ion-card>

  </div>
</ion-content>