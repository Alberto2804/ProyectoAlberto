<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/partidos"></ion-back-button>
    </ion-buttons>
    <ion-title>Detalle del Partido</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content color="light">
  
  <div class="loading-center" *ngIf="cargando">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
  </div>

  <div *ngIf="partido && !cargando">
    
    <div class="match-hero">
      <div class="status-badge">
        <ion-badge color="warning" *ngIf="partido.status === 'pending'">Pendiente</ion-badge>
        <ion-badge color="danger" class="live-badge" *ngIf="partido.status === 'live'">
          <span class="pulse-dot"></span> EN VIVO {{ partido.minute }}'
        </ion-badge>
        <ion-badge color="medium" *ngIf="partido.status === 'finished'">Finalizado</ion-badge>
      </div>

      <div class="scoreboard">
        <div class="team">
          <img [src]="'assets/escudos/' + formatearEscudo(partido.homeTeam) + '.png'" onerror="this.src='assets/icon/favicon.png'">
          <span>{{ partido.homeTeam }}</span>
        </div>

        <div class="score">
          <span [class.live-text]="partido.status === 'live'">{{ partido.status === 'pending' ? '-' : partido.homeScore }}</span>
          <span class="divider">-</span>
          <span [class.live-text]="partido.status === 'live'">{{ partido.status === 'pending' ? '-' : partido.awayScore }}</span>
        </div>

        <div class="team">
          <img [src]="'assets/escudos/' + formatearEscudo(partido.awayTeam) + '.png'" onerror="this.src='assets/icon/favicon.png'">
          <span>{{ partido.awayTeam }}</span>
        </div>
      </div>
    </div>

    <div class="bet-section" *ngIf="partido.status === 'pending'">
      <h3>Haz tu pronóstico</h3>
      <div class="bet-inputs">
        <ion-input type="number" [(ngModel)]="apuestaLocal" placeholder="0" class="score-input text-center"></ion-input>
        <span class="vs">VS</span>
        <ion-input type="number" [(ngModel)]="apuestaVisitante" placeholder="0" class="score-input text-center"></ion-input>
      </div>
      <ion-button expand="block" shape="round" class="bet-btn" (click)="enviarApuesta()" [disabled]="enviandoApuesta">
        <ion-spinner name="dots" *ngIf="enviandoApuesta"></ion-spinner>
        <span *ngIf="!enviandoApuesta">Enviar Apuesta</span>
      </ion-button>
    </div>

    <div class="locked-section" *ngIf="partido.status !== 'pending'">
      <ion-icon name="lock-closed-outline"></ion-icon>
      <p>Las apuestas para este partido están cerradas.</p>
    </div>

  </div>
</ion-content>